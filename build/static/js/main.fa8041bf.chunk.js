(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,n){e.exports=n(288)},156:function(e,t,n){},170:function(e,t,n){var a={"./arrowDown.svg":171,"./back.svg":172,"./clear.svg":173,"./menu.svg":174};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=170},171:function(e,t,n){e.exports=n.p+"static/media/arrowDown.e3c7a49d.svg"},172:function(e,t,n){e.exports=n.p+"static/media/back.ba47fd4c.svg"},173:function(e,t,n){e.exports=n.p+"static/media/clear.777b93c6.svg"},174:function(e,t,n){e.exports=n.p+"static/media/menu.d68162e2.svg"},188:function(e,t){},190:function(e,t){},227:function(e,t){},228:function(e,t){},288:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(39),c=n.n(o),i=(n(155),n(156),n(13)),s=n.n(i),l=n(24),u=n(27),d=n(28),m=n(30),p=n(29),_=n(31),f=n(23),v=n(66),h=n(145),E=n(41),g=n(135),N=n(143),b=Object(N.a)({uri:"http://localhost:4000/"}),y=Object(g.a)(function(e,t){var n=t.headers,a=localStorage.getItem("token");return{headers:Object(v.a)({},n,{authorization:a||""})}}),k=new E.c({link:y.concat(b),cache:new h.a}),w=n(294),O=n(295),j=n(144),C=n(292),q=n(146),S=function(e){var t=e.component,n=e.isAuth,r=Object(q.a)(e,["component","isAuth"]);return a.createElement(j.a,Object.assign({},r,{render:function(e){return n?a.createElement(t,e):a.createElement(C.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},R=n(17),x=n(18),A=n.n(x);function I(){var e=Object(R.a)(["\n    query getPendingHolidayRequests($_id: String!)\n    {\n        getPendingHolidayRequests(_id: $_id) {\n            _id,\n            creatorName,\n            unitManagerRef,\n            unitManagerName\n            unitManagerApproval,\n            refName,\n            ref,\n            refApproval,\n            from,\n            to,\n        }\n    }\n"]);return I=function(){return e},e}function M(){var e=Object(R.a)(["\n    query getUserHolidayRequests($_id: String!)\n    {\n        getUserHolidayRequests(_id: $_id) {\n            _id,\n            unitManagerRef,\n            unitManagerName\n            unitManagerApproval,\n            refName,\n            ref,\n            refApproval,\n            from,\n            to,\n        }\n    }\n"]);return M=function(){return e},e}function D(){var e=Object(R.a)(["\n    query projectManager($_id: String!)\n    {\n        projectManager(_id: $_id) \n        {\n            name,\n            ref,\n            unit,\n            projects {\n                _id,\n            },\n            holidayRequests {\n                _id\n            }\n        }    \n    }\n"]);return D=function(){return e},e}function T(){var e=Object(R.a)(["\n    query unitManager($_id: String!)\n    {\n        unitManager(_id: $_id) \n        {\n            name,\n            ref,\n            unit,\n            holidayRequests {\n                _id\n            }\n        }    \n    }\n"]);return T=function(){return e},e}function L(){var e=Object(R.a)(["\n    mutation respondToHolidayRequest($_id: String!, $role: String!, $refId: String!, $response: Boolean!)\n    {\n        respondToHolidayRequest(_id: $_id, role: $role, refId: $refId, response: $response)\n    }\n"]);return L=function(){return e},e}function P(){var e=Object(R.a)(["\n    query developer($_id: String!)\n    {\n        developer(_id: $_id) \n        {\n            name,\n            ref,\n            unit,\n            projects {\n                _id,\n                name,\n                projectManager {\n                    _id,\n                    name,\n                }\n            },\n            holidayRequests {\n                _id\n            }\n        }    \n    }\n"]);return P=function(){return e},e}function H(){var e=Object(R.a)(["\n    mutation isTokenValid($token: String!) \n    {\n        isTokenValid(token: $token)\n    }\n"]);return H=function(){return e},e}function $(){var e=Object(R.a)(["\n    mutation createHolidayRequest($_id: String!, $role: String!, $projectId: String, $to: String!, $from: String!)\n    {\n        createHolidayRequest(_id: $_id, role: $role, projectId: $projectId, to: $to, from: $from)\n    }\n    \n"]);return $=function(){return e},e}function U(){var e=Object(R.a)(["\n{\n    isLoggedIn {\n        username,\n    }\n}\n"]);return U=function(){return e},e}function G(){var e=Object(R.a)(["\n{\n    units {\n        _id,\n        name\n    }\n}\n"]);return G=function(){return e},e}function B(){var e=Object(R.a)(["\n    mutation deleteHolidayRequest($_id: String!)\n    {\n        deleteHolidayRequest(_id: $_id)\n    }\n"]);return B=function(){return e},e}function V(){var e=Object(R.a)(["\n    mutation signUp($username: String!, $password: String!)\n    {\n        signup(username: $username, password: $password)\n    }\n"]);return V=function(){return e},e}function Y(){var e=Object(R.a)(["\n    mutation logIn($username: String!, $password: String!) \n    {\n        login(username: $username, password: $password)\n    }\n"]);return Y=function(){return e},e}var Q=A()(Y()),W=A()(V()),F=A()(B()),J=A()(G()),K=A()(U()),X=A()($()),z=A()(H()),Z=A()(P()),ee=A()(L()),te=A()(T()),ne=A()(D()),ae={GET_HOLIDAY_REQUESTS:A()(M()),ADD_HOLIDAY_REQUEST:X,GQL_UNITS:J,WHO_AM_I:K,LOGIN:Q,SIGN_UP:W,VALIDATE_TOKEN:z,GET_DEVELOPER:Z,GET_UNIT_MANAGER:te,GET_PROJECT_MANAGER:ne,DELETE_HOLIDAY_REQUEST:F,GET_HOLIDAY_REQUESTS_MANAGER:A()(I()),RESPOND_TO_HOLIDAY_REQUEST:ee},re={isAuth:!1,isApp:!1,objectRefId:void 0,userId:void 0,role:void 0,user:void 0,logout:function(){re.objectRefId=void 0,re.user=void 0,re.isApp=!1,re.isAuth=!1,re.userId=void 0,re.role=void 0},setIsApp:function(e){re.isApp=e},setAuth:function(e){re.isAuth=e}},oe=a.createContext(re),ce=function(e){var t=e.noPadding,n=e.className,r=e.children,o=a.useContext(oe).isApp;return a.createElement("div",{style:o?{marginTop:50}:void 0,className:"layout ".concat(n||""," ").concat(t?"layout--no-padding":"")},r)},ie=n(147),se=function(e){var t=e.text,n=e.onClick,r=e.className,o=void 0===r?"":r,c=e.type,i=void 0===c?"submit":c;return a.createElement("button",{type:i,className:"".concat(o," button"),onClick:void 0!==n?n:function(){return console.log()}},t)},le=function(e){var t,n,r=a.useContext(oe),o=r.setAuth,c=r.isAuth,i=r.isApp;return c&&!1===i?a.createElement(ie.a,{to:"/holidayrequest"}):a.createElement(ce,null,a.createElement("div",{className:"login"},a.createElement(f.b,{mutation:ae.LOGIN},function(e,r){var c=r.error;return a.createElement("div",{className:"login__container"},a.createElement("h4",{className:"login__header"},"Signin to IMPACT HM"),a.createElement("form",{className:"login__form",onSubmit:function(a){a.preventDefault(),e({variables:{username:t.value,password:n.value}}).then(function(e){null!=e&&(localStorage.setItem("token",e.data.login),o(!0))}).catch(function(e){e.message})}},a.createElement("input",{className:"login__input",placeholder:"E-mail address",type:"email",ref:function(e){return t=e}}),a.createElement("input",{className:"login__input",placeholder:"Password",type:"password",ref:function(e){return n=e}}),a.createElement(se,{className:"login__input",text:"Login"}),c&&a.createElement("p",null,c.message)))})))},ue=function(e){return a.createElement(ce,null,a.createElement("div",{className:"home"},a.createElement("h2",{className:"home__title"},"Welcome to IMPACT\u2019s Holiday Manager"),a.createElement("h4",{className:"home__header"},"IMPACT's Holiday Manager is used as internally way of handling holiday requests. "),a.createElement("h5",{className:"home__subheader"}," As a Developer"),a.createElement("p",{className:"home__text"},"- You can add a new Holiday Request where you choose the date which you wish to have holiday."),a.createElement("p",{className:"home__text"},"- You can see all your active Holiday Requests and whether they are pending or have been approved/declined."),a.createElement("h5",{className:"home__subheader"},"As a Project Manager or Unit Manager"),a.createElement("p",{className:"home__text"},"- You can also add a Holiday Request and the request will be send to your reference within the firm."),a.createElement("p",{className:"home__text"},"- You also have the ability to see all your active Holiday Requests and their status."),a.createElement("p",{className:"home__text"},"- You can see all pending Holiday Requests from Project Manager, Unit Manager or Developers and respond to them.")))},de=n(25),me=n(34),pe=n(293),_e=n(142),fe=function(){return"undefined"!==typeof window&&window.document&&window.document.createElement},ve=function(e){var t=e.children,n=e.className,r=void 0===n?"":n,o=e.appendTo,i=void 0===o?"":o,s=a.useRef(function(){if(fe())return i?document.querySelector(i):document.body}()),l=a.useRef(function(){if(fe())return document.createElement("div")}());return a.useEffect(function(){var e;return fe()&&s.current&&l.current&&((e=l.current.classList).add.apply(e,Object(_e.a)(r.split(" ").filter(function(e){return!!e}))),s.current.appendChild(l.current)),function(){s.current&&l.current&&s.current.removeChild(l.current)}},[]),l.current?c.a.createPortal(t,l.current):null},he=function(e){var t=e.children,n=e.className,r=void 0===n?"":n,o=e.style,c=Object(a.useRef)(null);function i(t){t.composedPath&&t.composedPath()&&(t.composedPath().some(function(e){return e===c.current})||e.onClickOutside(t))}return Object(a.useEffect)(function(){if(fe())return setTimeout(function(){window.addEventListener("click",i)},0),function(){window.removeEventListener("click",i)}},[]),a.createElement("div",{className:r,style:o,ref:c},t)},Ee=function(e){var t=e.iconName,r=e.className,o=void 0===r?"":r;try{var c=n(170)("./".concat(t,".svg"));return a.createElement("img",{src:c,className:"svg-icon ".concat(o)})}catch(i){console.error(i)}return a.createElement(a.Fragment,null)},ge=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isExiting:!1,isOpen:!1},n.handleKeyDown=function(e){if(!n.props.preventClose)switch(e.keyCode){case t.ESCAPE_KEY:n.close()}},n.open=n.open.bind(Object(me.a)(Object(me.a)(n))),n.close=n.close.bind(Object(me.a)(Object(me.a)(n))),n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){this.props.disableBackgroundInteraction&&fe()&&this.toggleBackgroundInteraction(!0),document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentWillMount",value:function(){this.toggleBackgroundInteraction(!0)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,o=t.containerClassName,c=t.animationClassNames,i=t.animationDuration,s=t.includeBackdrop,l=t.includeExitButton,u=t.style,d=this.state,m=d.isExiting;return d.isOpen?a.createElement(ve,{className:"modal ".concat(o)},s?a.createElement(pe.a,{timeout:i,in:!m,appear:!0,unmountOnExit:!0,classNames:"fade"},a.createElement("div",{className:"modal__backdrop",style:{transitionDuration:"".concat(i,"ms")}})):null,a.createElement(pe.a,{timeout:i,in:!m,appear:!0,unmountOnExit:!0,classNames:c,onExited:this.exitAnimationDone.bind(this)},this.props.preventClose?a.createElement("div",{className:"modal__container ".concat(r)},n):a.createElement(he,{className:"modal__container ".concat(r),style:Object(v.a)({},u,{transitionDuration:"".concat(i,"ms")}),onClickOutside:this.close.bind(this)},l?a.createElement(a.Fragment,null,a.createElement("div",{onClick:function(){return e.close()},className:"modal__exit-button"},a.createElement(Ee,{iconName:"clear"})),n):n))):null}},{key:"open",value:function(){var e=this.props.disableBackgroundInteraction;this.state.isOpen||(this.setState({isOpen:!0}),e&&fe()&&this.toggleBackgroundInteraction(!1))}},{key:"close",value:function(){this.state.isOpen&&this.setState({isExiting:!0})}},{key:"exitAnimationDone",value:function(){var e=this.props.disableBackgroundInteraction;this.setState({isExiting:!1,isOpen:!1}),null!=this.props.onModalClosed&&this.props.onModalClosed(),e&&fe()&&this.toggleBackgroundInteraction(!0)}},{key:"toggleBackgroundInteraction",value:function(e){fe()&&(e?document.body.classList.remove("disable-interaction"):document.body.classList.add("disable-interaction"))}}]),t}(a.Component);ge.defaultProps={animationDuration:300,includeBackdrop:!0,includeExitButton:!0,disableBackgroundInteraction:!0,className:"",containerClassName:"",animationClassNames:"fade",preventClose:!1},ge.ESCAPE_KEY=27;var Ne=ge;function be(e,t){var n=ye(e),a=ye(t),r=Math.abs(n.getTime()-a.getTime());return Math.ceil(r/864e5)}function ye(e){var t=parseInt(e.toString(),10);return new Date(t)}function ke(e){return null===e||void 0===e?"Pending":e?"Approved":"Unapproved"}var we,Oe=function(e){var t=e.query,n=e.variables,r=e.toggleRequest,o=e.dataType,c=e.className,i=void 0===c?"active-request-list":c;return a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(i,"__headlines")},a.createElement("div",{className:"".concat(i,"__headline")},"Period"),a.createElement("div",{className:"".concat(i,"__headline_days")},"Days"),a.createElement("div",{className:"".concat(i,"__headline")},"Unit Manager"),a.createElement("div",{className:"".concat(i,"__headline")},"Project Manager")),a.createElement("div",{className:"".concat(i,"__requests")},a.createElement(f.c,{query:t,variables:n},function(e){var t=e.loading,n=e.error,c=e.data;return t?a.createElement("p",null,"Loading..."):n?a.createElement("p",null,"Error..."):c?c[o].map(function(e,t){return a.createElement("div",{className:"".concat(i,"__request"),onClick:function(){return r(c[o],t)},key:t},a.createElement("div",{className:"".concat(i,"__request-text")},ye(e.from).toLocaleDateString()," ",ye(e.to).toLocaleDateString()),a.createElement("div",{className:"".concat(i,"__request-days")},be(e.from,e.to)),a.createElement("div",{className:"".concat(i,"__request-text")},e.unitManagerName," - ",a.createElement("span",{className:"".concat(i,"__request-status")},ke(e.unitManagerApproval))),e.ref?a.createElement("div",{className:"".concat(i,"__request-text")},e.refName," - ",a.createElement("span",{className:"".concat(i,"__request-status")},ke(e.refApproval))):a.createElement("div",{className:"".concat(i,"__request-text")},"NaN"))}):void 0})))},je=function(e){var t="active-request",n=a.useContext(oe).objectRefId,r=a.useState(void 0),o=Object(de.a)(r,2),c=o[0],i=o[1],u=a.createRef();function d(){return(d=Object(l.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=ae.DELETE_HOLIDAY_REQUEST,e.next=3,k.mutate({mutation:t,variables:{_id:c._id}}).catch(function(e){console.log(e.message)}).then(function(e){u.current.close()});case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return a.createElement("div",{className:"".concat(t)},a.createElement(Oe,{dataType:"getUserHolidayRequests",toggleRequest:function(e,t){u.current&&u.current.open(),i(e[t])},query:ae.GET_HOLIDAY_REQUESTS,variables:{_id:n}}),void 0!==c&&a.createElement(Ne,{className:"".concat(t,"__modal"),ref:u},a.createElement("h4",{className:"".concat(t,"__modal__header")},"Delete Holiday Request"),a.createElement("p",{className:"".concat(t,"__modal__description")},"Do you wish to delete the following Holiday Request?"),a.createElement("div",{className:"".concat(t,"__modal__request")},"Ranging from:",a.createElement("span",{className:"".concat(t,"__modal__date")},ye(c.from).toDateString())),a.createElement("div",{className:"".concat(t,"__modal__request")},"to:",a.createElement("span",{className:"".concat(t,"__modal__date")},ye(c.to).toDateString())),a.createElement(se,{text:"Yes",onClick:function(){return d.apply(this,arguments)},className:"".concat(t,"__modal__button")})))},Ce=function(e){var t="holiday-request";return a.createElement(ce,null,a.createElement("div",{className:"".concat(t)},a.createElement("div",{className:"".concat(t,"__wrapper")},a.createElement("div",{className:"".concat(t,"__header")},a.createElement("h4",{className:"".concat(t,"__title")},"Your Holiday Requests"),a.createElement("p",{className:"".concat(t,"__description")},"Get an overview of all your Holiday Requests, and delete one if wanted."))),a.createElement(je,null)))};!function(e){e.unitManager="Unit Manager",e.projectManager="Project Manager",e.developer="Developer"}(we||(we={}));var qe,Se=function(e){var t=e.query,n=e.variables,r=e.toggleRequest,o=e.dataType,c=e.className,i=void 0===c?"pending-request-list":c,s=a.useContext(oe).role;return a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(i,"__headlines")},a.createElement("div",{className:"".concat(i,"__headline")},"Period"),a.createElement("div",{className:"".concat(i,"__headline_days")},"Days"),a.createElement("div",{className:"".concat(i,"__headline")},"Requester"),a.createElement("div",{className:"".concat(i,"__headline")},s===we.projectManager?"Project Manager":"Unit Manager")),a.createElement("div",{className:"".concat(i,"__requests")},a.createElement(f.c,{query:t,variables:n},function(e){var t=e.loading,n=e.error,c=e.data;return t?a.createElement("p",null,"Loading..."):n?a.createElement("p",null,"Error..."):c?c[o].map(function(e,t){return a.createElement("div",{className:"".concat(i,"__request"),onClick:function(){return r(c[o],t)},key:t},a.createElement("p",{className:"".concat(i,"__request-text")},ye(e.from).toLocaleDateString()," - ",ye(e.to).toLocaleDateString()),a.createElement("p",{className:"".concat(i,"__request-days")},be(e.from,e.to)),a.createElement("p",{className:"".concat(i,"__request-text")},e.creatorName),function(e){return s===we.unitManager?a.createElement("div",{className:"".concat(i,"__request-text")},e.refName," - ",a.createElement("span",{className:"".concat(i,"__request-status")},ke(e.refApproval))):s===we.projectManager?a.createElement("div",{className:"".concat(i,"__request-text")},e.unitManagerName," - ",a.createElement("span",{className:"".concat(i,"__request-status")},ke(e.unitManagerApproval))):a.createElement("div",null,'"Nan"')}(e))}):void 0})))},Re=function(e){var t=a.useContext(oe),n=t.objectRefId,r=t.role,o=a.useState(void 0),c=Object(de.a)(o,2),i=c[0],u=c[1],d=a.createRef();function m(e){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=ae.RESPOND_TO_HOLIDAY_REQUEST,e.next=3,k.mutate({mutation:a,variables:{_id:i._id,role:r,refId:n,response:t}}).catch(function(e){console.log(e.message)}).then(function(e){d.current&&d.current.close()});case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return a.createElement(ce,null,a.createElement("div",{className:"".concat("pending")},a.createElement("div",{className:"".concat("pending","__wrapper")},a.createElement("div",{className:"".concat("pending","__header")},a.createElement("h5",{className:"".concat("pending","__title")},"Pending Holiday Requests"),a.createElement("p",{className:"".concat("pending","__description")},"Get an overview of pending holiday requests that you can approve")),a.createElement(Se,{toggleRequest:function(e,t){d.current&&d.current.open(),u(e[t])},dataType:"getPendingHolidayRequests",query:ae.GET_HOLIDAY_REQUESTS_MANAGER,variables:{_id:n}}),void 0!==i&&a.createElement(Ne,{className:"".concat("pending","__modal"),ref:d},a.createElement("h4",{className:"".concat("pending","__modal__header")},"Respond to Holiday Request"),a.createElement("p",{className:"".concat("pending","__modal__description")},"Do you wish to approve or decline the following Holiday Request?"),a.createElement("div",{className:"".concat("pending","__modal__request")},"Ranging from:",a.createElement("span",{className:"".concat("pending","__modal__date")},ye(i.from).toDateString())),a.createElement("div",{className:"".concat("pending","__modal__request")},"to:",a.createElement("span",{className:"".concat("pending","__modal__date")},ye(i.to).toDateString())),a.createElement("div",{className:"".concat("pending","__modal__buttons")},a.createElement("button",{onClick:function(){return m(!0)},className:"".concat("pending","__modal__button button")},"Approve"),a.createElement("button",{onClick:function(){return m(!1)},className:"".concat("pending","__modal__button-decline button")},"Decline"))))))},xe=n(40),Ae=n(85),Ie=n.n(Ae);n(183);!function(e){e.XS="(max-width: 480px)",e.SM="(max-width: 767px)",e.MD="(min-width: 768px) and (max-width: 992px)",e.LG="(min-width: 993px)"}(qe||(qe={}));var Me=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).mediaQueries=[],n.onWidthChange=function(e,t){t.matches&&n.setState({breakpoint:e})},n.state={breakpoint:""},n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;"undefined"!==typeof window&&(this.mediaQueries=Object.keys(qe).map(function(t){return{name:t,query:window.matchMedia(qe[t]),handler:e.onWidthChange.bind(e,t)}}),this.mediaQueries.forEach(function(t){t.query.matches&&e.setState({breakpoint:t.name}),t.query.addListener(t.handler)}))}},{key:"componentWillUnmount",value:function(){this.mediaQueries.forEach(function(e){return e.query.removeListener&&e.query.removeListener(e.handler)})}},{key:"render",value:function(){var e=this.state.breakpoint,t={breakpoint:e,match:this.props.match.includes(qe[e])};return this.props.children(t)}}]),t}(a.Component),De=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isOpen:!1,selectedValue:n.defaultValue},n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){this.compareOptions(e.options,this.props.options)}},{key:"selectItem",value:function(e,t,n){this.props.returnIndex?(t&&this.props.defaultValue&&(n-=1),e=this.props.options[n],this.props.handleChange&&this.props.handleChange(n)):(e=t?JSON.parse(e):e,this.props.handleChange&&this.props.handleChange(e)),this.setState({selectedValue:e}),this.props.handlePostChange&&this.props.handlePostChange()}},{key:"render",value:function(){var e=this,t=this.props,n=t.options,r=t.width,o=t.isInline,c=t.className,i=t.styles,s=t.defaultValue,l=t.controlledValue,u=this.state,d=u.selectedValue,m=u.isOpen,p=l||d,_="string"===typeof p?p:this.renderValue(p);return a.createElement(Me,{match:[qe.XS,qe.SM,qe.MD]},function(t){return t.match?a.createElement("div",{className:"dropdown ".concat(c," ").concat(o?" dropdown--inline":""," ").concat(0===n.length?" dropdown--disabled":""),style:{width:r+"px",backgroundColor:i.dropdownBackgroundColor,borderColor:i.borderColor}},a.createElement("select",{className:"dropdown__portable-select",value:JSON.stringify(l)||JSON.stringify(d),onChange:function(t){return e.selectItem(t.target.value,!0,t.target.selectedIndex)}},s?a.createElement("option",{value:""},s):null,n.map(function(t,n){return a.createElement("option",{key:n,value:JSON.stringify(t)},e.renderValue(t))})),a.createElement("div",{className:"dropdown__spacer",style:{backgroundColor:i.borderColor}}),a.createElement("div",{className:"dropdown__icon-container",style:{color:i.iconColor}},a.createElement(Ee,{className:"dropdown__icon",iconName:"arrowDown"}))):a.createElement("div",{className:"dropdown ".concat(c," ").concat(o?"dropdown--inline":""," ").concat(0===n.length?"dropdown--disabled":""),onClick:function(){return e.setState({isOpen:!e.state.isOpen})},style:{width:r+"px",backgroundColor:i.dropdownBackgroundColor,borderColor:i.borderColor}},a.createElement("div",{className:"dropdown__value"},_),a.createElement("div",{className:"dropdown__spacer",style:{backgroundColor:i.borderColor}}),a.createElement("div",{className:"dropdown__icon-container",style:{color:i.iconColor}},a.createElement(Ee,{className:"dropdown__icon",iconName:"arrowDown"})),m&&n.length>0?a.createElement("ul",{className:"dropdown__list",style:{backgroundColor:i.optionsBackgroundColor,color:i.optionsColor}},n.map(function(t,n){return a.createElement("li",{className:"dropdown__item ".concat(l===t?"dropdown__item--active":""),key:n,onClick:function(){return e.selectItem(t,!1,n)}},a.createElement("span",{className:"dropdown__item-hover-bg",style:{backgroundColor:i.optionHighlightColor}}),e.renderValue(t))})):null)})}},{key:"renderValue",value:function(e){return"function"===typeof this.props.children?this.props.children(e):e}},{key:"compareOptions",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},{key:"defaultValue",get:function(){var e=this.props,t=e.defaultIndex,n=e.defaultValue,a=e.options;return null!=n?n:void 0!==t?a[t]:a[0]}}]),t}(a.Component);De.defaultProps={className:"",styles:{dropdownBackgroundColor:"",optionHighlightColor:"",optionsBackgroundColor:"",optionsColor:"",iconColor:"",borderColor:""}};var Te=De,Le=function(e){Object(xe.a)(e);var t="add-request",n={from:new Date,to:new Date},r=a.useState(n),o=Object(de.a)(r,2),c=o[0],i=o[1],s=a.useContext(oe),l=s.user,u=s.objectRefId,d=s.role,m=a.useState(void 0),p=Object(de.a)(m,2),_=p[0],v=p[1];a.useEffect(function(){void 0!==l&&void 0!==l.projects&&v(l.projects[0])},[]);var h=c.from,E=c.to,g={start:h,end:E};return a.createElement("div",{className:"".concat(t)},d===we.developer&&a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(t,"__project")},"Pick the Project Manager you want to refer to request to"),a.createElement(Te,{handleChange:function(e){var t=l.projects;if(void 0!==t){var n=t.find(function(t){return t.projectManager.name===e});v(n)}},className:"".concat(t,"__dropdown"),options:function(){if(void 0!==l){var e=l.projects,t=[];return e.forEach(function(e){t.push(e.projectManager.name)}),t}return[]}()})),a.createElement("p",{className:"".concat(t,"__description")},"Pick the dates you where you wish to have vacation "),a.createElement("div",{className:"".concat(t,"__selected")},a.createElement("div",{className:"".concat(t,"__selected-header")},"Selected Dates"),h&&E&&a.createElement("div",{className:"".concat(t,"__selected-dates")},a.createElement("div",{className:"".concat(t,"__selected-date")},h.toLocaleDateString()),a.createElement("div",{className:"".concat(t,"__selected-date")},"-"),a.createElement("div",{className:"".concat(t,"__selected-date")},E.toLocaleDateString()))),h&&E&&a.createElement(se,{className:"".concat(t,"__reset-button"),onClick:function(){i(n)},text:"Reset"}),a.createElement(Ie.a,{className:"Selectable",numberOfMonths:2,selectedDays:[h,{from:h,to:E}],modifiers:g,onDayClick:function(e){var t=Ie.a.DateUtils.addDayToRange(e,c);i(t),console.log(t)}}),a.createElement(f.b,{mutation:ae.ADD_HOLIDAY_REQUEST},function(e,n){return n.error,a.createElement(se,{text:"Add Request",className:"".concat(t,"__add-button"),onClick:function(t){t.preventDefault(),e({variables:{_id:u,role:d,projectId:_._id,to:E,from:h}}).catch(function(e){console.log(e.message)})}})}))},Pe=function(e){Object(xe.a)(e);var t="add-holiday-request";return a.createElement(ce,null,a.createElement("div",{className:"".concat(t)},a.createElement("div",{className:"".concat(t,"__wrapper")},a.createElement("div",{className:"".concat(t,"__header")},a.createElement("h4",{className:"".concat(t,"__title")},"Add a Holiday Request"))),a.createElement(Le,null)))},He=function(e){var t=a.useContext(oe),n=t.isAuth,r=t.role;return a.createElement(O.a,null,a.createElement(j.a,{exact:!0,path:"/",render:function(e){return a.createElement(ue,e)}}),a.createElement(j.a,{path:"/login",render:function(e){return a.createElement(le,e)}}),a.createElement(S,{path:"/holiday-request",component:Ce,isAuth:n}),a.createElement(S,{path:"/add-request",component:Pe,isAuth:n}),r!==we.developer&&a.createElement(S,{path:"/pending",component:Re,isAuth:n}),a.createElement(C.a,{to:"/"}))},$e=n(296),Ue=function(e){var t=e.mobile,n=a.useContext(oe),r=n.isAuth,o=n.logout,c=n.role,i=a.useState(!1),s=Object(de.a)(i,2),l=s[0],u=s[1],d=t?"navigation--mobile":"navigation",m=function(){o(),localStorage.removeItem("token")},p=function(){u(!l)},_=function(){return r?a.createElement(a.Fragment,null,a.createElement($e.a,{onClick:p,exact:!0,activeClassName:"link--active",className:"".concat(d,"__link"),to:"/"},"Home"),a.createElement($e.a,{onClick:p,activeClassName:"link--active",className:"".concat(d,"__link"),to:"/holiday-request"},"My Requests"),a.createElement($e.a,{onClick:p,activeClassName:"link--active",className:"".concat(d,"__link"),to:"/add-request"},"Add Request"),c!==we.developer&&a.createElement($e.a,{onClick:p,activeClassName:"link--active",className:"".concat(d,"__link"),to:"/pending"},"Pending Requests"),a.createElement("div",{className:"".concat(d,"__link"),onClick:m}," Logout ")):a.createElement(a.Fragment,null,a.createElement($e.a,{onClick:p,exact:!0,activeClassName:"link--active",className:"".concat(d,"__link"),to:"/"},"Home"),a.createElement($e.a,{onClick:p,activeClassName:"link--active",className:"".concat(d,"__link"),to:"/login"},"Login"))};return a.createElement(ce,null,t?a.createElement("div",{className:"".concat(d)},a.createElement("div",{onClick:p},a.createElement(Ee,{className:"".concat(d,"__icon"),iconName:"menu"})),a.createElement($e.a,{to:"/",className:"".concat(d,"__logo")},"IMPACT"),l&&a.createElement("div",{className:"".concat(d,"__menu")},a.createElement("div",{className:"".concat(d,"__close"),onClick:p},a.createElement(Ee,{iconName:"back"}),"Luk"),a.createElement("div",{className:"".concat(d,"__links")},a.createElement(_,null)))):a.createElement("div",{className:d},a.createElement($e.a,{exact:!0,className:"".concat(d,"__logo"),to:"/"},"IMPACT"),a.createElement("div",{className:"".concat(d,"__links")},a.createElement(_,null))))};function Ge(){return Be.apply(this,arguments)}function Be(){return(Be=Object(l.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.query({query:ae.WHO_AM_I}).catch(function(e){console.log("IsAuthenticated: ",e)});case 2:if(!e.sent){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ve(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(l.a)(s.a.mark(function e(t,n){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=ae.GET_DEVELOPER,e.t0=t,e.next="Developer"===e.t0?4:"Project Manager"===e.t0?6:"Unit Manager"===e.t0?8:10;break;case 4:return a=ae.GET_DEVELOPER,e.abrupt("break",12);case 6:return a=ae.GET_PROJECT_MANAGER,e.abrupt("break",12);case 8:return a=ae.GET_UNIT_MANAGER,e.abrupt("break",12);case 10:return console.log("No Role was specified"),e.abrupt("break",12);case 12:return e.next=14,k.query({query:a,variables:{_id:n}}).catch(function(e){console.log(e)});case 14:if(!(r=e.sent)){e.next=17;break}return e.abrupt("return",r.data);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Qe=n(141),We=n(67),Fe=function(e){return Object(xe.a)(e),a.createElement(ce,null,a.createElement("div",{className:"footer"}))},Je=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isAuth:!1,isApp:!1,userId:void 0,objectRefId:void 0,role:void 0,user:void 0,logout:function(){n.setState({objectRefId:void 0,user:void 0,isAuth:!1,isApp:!1,userId:void 0,role:void 0})},setIsApp:function(e){n.setState({isApp:e})},setAuth:function(e){n.setState({isAuth:e})}},n}return Object(_.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(l.a)(s.a.mark(function e(){var t,n,a,r,o,c,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=13;break}return n=We.decode(t),a=n.data,this.setState({userId:a.id,role:a.role,objectRefId:a.objectRefId}),e.next=6,Ve(a.role,a.objectRefId);case 6:r=e.sent,o=r.developer,c=r.unitManager,i=r.projectManager,a.role===we.developer&&this.setState({user:o}),a.role===we.projectManager&&this.setState({user:i}),a.role===we.unitManager&&this.setState({user:c});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(l.a)(s.a.mark(function e(){var t,n,a,r,o,c,i,l,u,d,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new URLSearchParams(document.location.search)).has("app")&&this.setState({isApp:!0}),!t.has("token")){e.next=19;break}if(!(n=t.get("token"))){e.next=17;break}return a=We.decode(n),r=a.data,localStorage.setItem("token",n),this.setState({userId:r.id,role:r.role,objectRefId:r.objectRefId,isAuth:!0}),e.next=10,Ve(r.role,r.objectRefId);case 10:o=e.sent,c=o.developer,i=o.unitManager,l=o.projectManager,r.role===we.developer&&this.setState({user:c}),r.role===we.projectManager&&this.setState({user:l}),r.role===we.unitManager&&this.setState({user:i});case 17:e.next=27;break;case 19:if(!(u=localStorage.getItem("token"))){e.next=27;break}return d=We.decode(u),m=d.data,this.setState({userId:m.id,role:m.role,objectRefId:m.objectRefId}),e.next=25,Ge();case 25:e.sent&&this.setState({isAuth:!0});case 27:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isApp;return a.createElement(f.a,{client:k},a.createElement(oe.Provider,{value:this.state},a.createElement(w.a,null,a.createElement("div",{className:"app"},a.createElement(Qe.a,{query:"(max-width: 900px)"},function(t){return a.createElement(a.Fragment,null,!e&&a.createElement(Ue,{mobile:t}),a.createElement(He,null),a.createElement(Fe,null))})))))}}]),t}(a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[150,1,2]]]);
//# sourceMappingURL=main.fa8041bf.chunk.js.map